<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="98,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T1U3">p</span> ] = determineCriterion( <span class="mxinfo " id="T1:U2"><span class="mxinfo " id="T1:U3"><span class="var type1" id="S2T1U6">p</span></span></span>, <span class="var type1" id="S3T3U7">trial</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="98,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%update criterion for use on next trial</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,3" id="srcline3"> 3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="98,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% when two layers are available, each are allowed seperate decision</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">% thresholds</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="98,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">% p.mean_famil_diff(trial) = mean(familDiffs);</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,8" id="srcline8"> 8</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T10:U6"><span class="mxinfo " id="T3:U7"><span class="var type1" id="S2T1U12">p</span>.numThresh</span> == <span class="mxinfo " id="T3:U9">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="98,9" id="srcline9"> 9</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T10:U10">all(<span class="mxinfo " id="T5:U11"><span class="mxinfo " id="T7:U12"><span class="var type1" id="S2T1U21">p</span>.usePRC</span>(<span class="mxinfo " id="T46:U14">:</span>,<span class="var type1" id="S3T3U24">trial</span>)</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,10" id="srcline10">10</a></span><span class="line">        <span class="mxinfo " id="T8:U16"><span class="var type1" id="S5T8U27">famil_diff_thresh_new</span> = <span class="mxinfo " id="T8:U18"><span class="mxinfo " id="T7:U19"><span class="var type1" id="S2T1U30">p</span>.famil_diff_thresh</span>(<span class="mxinfo " id="T3:U21">2</span>,<span class="mxinfo " id="T45:U22"><span class="mxinfo " id="T3:U23">1</span>:<span class="mxinfo " id="T3:U24"><span class="mxinfo " id="T3:U25">end</span>-<span class="mxinfo " id="T3:U26">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="98,11" id="srcline11">11</a></span><span class="line">        <span class="mxinfo " id="T7:U27"><span class="mxinfo " id="T7:U28"><span class="var type1" id="S2T1U42">p</span>.famil_diff_thresh</span> = <span class="mxinfo " id="T108:U30">[<span class="mxinfo " id="T8:U31"><span class="mxinfo " id="T7:U32"><span class="var type1" id="S2T1U48">p</span>.famil_diff_thresh</span>(<span class="mxinfo " id="T3:U34">1</span>,<span class="mxinfo " id="T46:U35">:</span>)</span>; <span class="mxinfo " id="T8:U36"><span class="mxinfo " id="T3:U37"><span class="mxinfo " id="T8:U38"><span class="var type1" id="S2T1U55">p</span>.famil_difference</span>(<span class="var type1" id="S3T3U57">trial</span>)</span>, <span class="var type1" id="S5T8U58">famil_diff_thresh_new</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="98,12" id="srcline12">12</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,13" id="srcline13">13</a></span><span class="line">        <span class="mxinfo " id="T8:U42"><span class="var type1" id="S5T8U62">famil_diff_thresh_new</span> = <span class="mxinfo " id="T8:U44"><span class="mxinfo " id="T7:U45"><span class="var type1" id="S2T1U65">p</span>.famil_diff_thresh</span>(<span class="mxinfo " id="T3:U47">1</span>,<span class="mxinfo " id="T45:U48"><span class="mxinfo " id="T3:U49">1</span>:<span class="mxinfo " id="T3:U50"><span class="mxinfo " id="T3:U51">end</span>-<span class="mxinfo " id="T3:U52">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="98,14" id="srcline14">14</a></span><span class="line">        <span class="mxinfo " id="T7:U53"><span class="mxinfo " id="T7:U54"><span class="var type1" id="S2T1U77">p</span>.famil_diff_thresh</span> = <span class="mxinfo " id="T108:U56">[<span class="mxinfo " id="T8:U57"><span class="mxinfo " id="T3:U58"><span class="mxinfo " id="T8:U59"><span class="var type1" id="S2T1U83">p</span>.famil_difference</span>(<span class="var type1" id="S3T3U85">trial</span>)</span>, <span class="var type1" id="S5T8U86">famil_diff_thresh_new</span></span>; <span class="mxinfo " id="T8:U63"><span class="mxinfo " id="T7:U64"><span class="var type1" id="S2T1U90">p</span>.famil_diff_thresh</span>(<span class="mxinfo " id="T3:U66">2</span>,<span class="mxinfo " id="T46:U67">:</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="98,15" id="srcline15">15</a></span><span class="line">        <span class="comment">% p.famil_diff_thresh = [p.famil_diff_thresh, p.famil_difference(trial)];</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,16" id="srcline16">16</a></span><span class="line">        <span class="comment">%     p.threshForPlotting(trial) = mean(p.famil_diff_thresh);</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,17" id="srcline17">17</a></span><span class="line">        <span class="comment">% p.familDiff_threshTracking(trial) = famil_diff_thresh_new;</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,19" id="srcline19">19</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T8:U68"><span class="var type1" id="S5T8U97">famil_diff_thresh_new</span> = <span class="mxinfo " id="T8:U70"><span class="mxinfo " id="T7:U71"><span class="var type1" id="S2T1U100">p</span>.famil_diff_thresh</span>(<span class="mxinfo " id="T3:U73">1</span>,<span class="mxinfo " id="T45:U74"><span class="mxinfo " id="T3:U75">1</span>:<span class="mxinfo " id="T3:U76"><span class="mxinfo " id="T3:U77">end</span>-<span class="mxinfo " id="T3:U78">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="98,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T7:U79"><span class="mxinfo " id="T7:U80"><span class="var type1" id="S2T1U112">p</span>.famil_diff_thresh</span> = <span class="mxinfo " id="T108:U82">[<span class="mxinfo " id="T8:U83"><span class="mxinfo " id="T3:U84"><span class="mxinfo " id="T8:U85"><span class="var type1" id="S2T1U118">p</span>.famil_difference</span>(<span class="var type1" id="S3T3U120">trial</span>)</span>, <span class="var type1" id="S5T8U121">famil_diff_thresh_new</span></span>; <span class="mxinfo " id="T8:U89"><span class="mxinfo " id="T7:U90"><span class="var type1" id="S2T1U125">p</span>.famil_diff_thresh</span>(<span class="mxinfo " id="T3:U92">2</span>,<span class="mxinfo " id="T46:U93">:</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="98,22" id="srcline22">22</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="98,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="98,25" id="srcline25">25</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="98,26" id="srcline26">26</a></span><span class="line"></span></span>
</pre>
